!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Open3D=e():t.Open3D=e()}(self,(function(){return(()=>{"use strict";var t={465:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Intersection=void 0;const n=r(582),i=r(653),s=r(614),o=r(226);class a{constructor(){throw new Error("Cannot initialize an intersection instance.")}static LineLine(t,e,r=!1,n=i.Open3d.EPSILON){if(!t.IsValid||!e.IsValid)return null;const s=t.From,a=t.To,l=e.From,u=e.To,c=s.Subtract(l),h=u.Subtract(l),d=a.Subtract(s),Z=c.X*h.X+c.Y*h.Y+c.Z*h.Z,P=h.X*d.X+h.Y*d.Y+h.Z*d.Z,m=c.X*d.X+c.Y*d.Y+c.Z*d.Z,X=h.X*h.X+h.Y*h.Y+h.Z*h.Z,Y=(d.X*d.X+d.Y*d.Y+d.Z*d.Z)*X-P*P;if(i.Open3d.equals(Y,0))return null;const p=(Z*P-m*X)/Y,f=(Z+P*p)/X,g=new o.Vector3d(s.X+p*d.X,s.Y+p*d.Y,s.Z+p*d.Z),A=new o.Vector3d(l.X+f*h.X,l.Y+f*h.Y,l.Z+f*h.Z);if(g.DistanceTo(A)>n)return null;const O=g.Add(A).Divide(2);if(!r)return O;const w=t.ClosestParameter(O,!1),T=e.ClosestParameter(O,!1);return w>=0&&w<=1&&T>=0&&T<=1?O:null}static LinePlane(t,e,r=!1){const n=t.From.Subtract(e.Origin).DotProduct(e.Normal),s=t.UnitDirection.DotProduct(e.Normal);if(i.Open3d.equals(s,0))return null;const o=-n/s;return r&&(o<0||o>t.Length)?null:t.From.Add(t.UnitDirection.Multiply(o))}static PlanePlane(t,e){if(t.Normal.IsParallelTo(e.Normal))return null;const r=e.Normal.CrossProduct(t.Normal),i=t.Origin.Add(e.Origin).Multiply(.5),o=s.Plane.CreateFromNormal(i,r),l=a.PlanePlanePlane(t,e,o);return null==l?null:new n.Line(l,l.Add(o.Normal))}static PlanePlanePlane(t,e,r){const n=t.Equation,s=e.Equation,a=r.Equation,l=[n[0],n[1],n[2],s[0],s[1],s[2],a[0],a[1],a[2]],u=[-n[3],-s[3],-a[3]],[c,h,d,Z,P,m,X,Y,p]=l,f=c*(P*p-m*Y)-h*(Z*p-m*X)+d*(Z*Y-P*X);if(i.Open3d.equals(f,0))return null;const g=1/f,A=g*(P*p-m*Y)*u[0]+g*(d*Y-h*p)*u[1]+g*(h*m-d*P)*u[2],O=g*(m*X-Z*p)*u[0]+g*(c*p-d*X)*u[1]+g*(d*Z-c*m)*u[2],w=g*(Z*Y-P*X)*u[0]+g*(h*X-c*Y)*u[1]+g*(c*P-h*Z)*u[2];return new o.Vector3d(A,O,w)}}e.Intersection=a},582:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;const n=r(653);class i{constructor(t,e){this.From=t,this.To=e}get IsValid(){return!this.From.Equals(this.To)}get Direction(){if(!this.IsValid)throw new Error("Cannot get direction of an invalid line.");return this.To.Subtract(this.From)}get UnitDirection(){return this.Direction.Unitize()}get Length(){return this.To.DistanceTo(this.From)}set Length(t){let e=this.UnitDirection;t<0&&(e=e.Reverse()),this.To=this.From.Add(e.Multiply(Math.abs(t)))}Clone(){return new i(this.From,this.To)}PointAt(t){if(!this.IsValid)throw new Error("Cannot evaluate an invalid line.");return this.Direction.Multiply(t).Add(this.From)}PointAtLength(t){if(!this.IsValid)throw new Error("Cannot evaluate an invalid line.");return this.UnitDirection.Multiply(t).Add(this.From)}ClosestParameter(t,e=!1){if(!this.IsValid)throw new Error("Invalid line does not have a closest point.");const r=t.Subtract(this.From),i=this.To.Subtract(this.From),s=i.DotProduct(i);let o=i.DotProduct(r)/s;return e&&(o=n.Open3d.clamp(o,0,1)),o}ClosestPoint(t,e=!1){const r=this.ClosestParameter(t,e);return this.PointAt(r)}DistanceTo(t,e=!1){return this.ClosestPoint(t,e).DistanceTo(t)}Equals(t){return this.From.Equals(t.From)&&this.To.Equals(t.To)}Extend(t,e){if(!this.IsValid)throw new Error("Cannot extend an invalid line.");const r=this.UnitDirection.Multiply(-t).Add(this.From),n=this.UnitDirection.Multiply(e).Add(this.To);return new i(r,n)}Flip(){return new i(this.To,this.From)}Transform(t){const e=this.From.Transform(t),r=this.To.Transform(t);return new i(e,r)}}e.Line=i},653:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Open3d=void 0,function(t){let e;!function(t){t[t.Parallel=1]="Parallel",t[t.NotParallel=0]="NotParallel",t[t.AntiParallel=-1]="AntiParallel"}(e=t.ParallelIndicator||(t.ParallelIndicator={})),t.EPSILON=1e-6,t.ANGLE_EPSILON=.001,t.equals=(e,r)=>Math.abs(e-r)<t.EPSILON,t.angleEquals=(e,r)=>Math.abs(e-r)<t.ANGLE_EPSILON,t.clamp=(t,e,r)=>Math.max(e,Math.min(r,t))}(e.Open3d||(e.Open3d={}))},614:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Plane=void 0;const n=r(582),i=r(226);class s{constructor(t,e,r){e=e.Unitize(),r=r.Unitize();const n=e.CrossProduct(r).Unitize();r=n.CrossProduct(e).Unitize(),this.Origin=t,this.XAxis=e,this.YAxis=r,this.ZAxis=n}get Normal(){return this.ZAxis.Unitize()}get XAxisLine(){return new n.Line(this.Origin,this.Origin.Add(this.XAxis))}get YAxisLine(){return new n.Line(this.Origin,this.Origin.Add(this.YAxis))}get ZAxisLine(){return new n.Line(this.Origin,this.Origin.Add(this.ZAxis))}get Equation(){const{X:t,Y:e,Z:r}=this.Normal;return[t,e,r,-t*this.Origin.X-e*this.Origin.Y-r*this.Origin.Z]}static get PlaneXY(){return new s(i.Vector3d.Zero,i.Vector3d.XAxis,i.Vector3d.YAxis)}static get PlaneZX(){return new s(i.Vector3d.Zero,i.Vector3d.ZAxis,i.Vector3d.XAxis)}static get PlaneYZ(){return new s(i.Vector3d.Zero,i.Vector3d.YAxis,i.Vector3d.ZAxis)}PointAt(t,e){return this.Origin.Add(this.XAxis.Multiply(t)).Add(this.YAxis.Multiply(e))}ClosestParameter(t){return[this.XAxisLine.ClosestParameter(t),this.YAxisLine.ClosestParameter(t)]}ClosestPoint(t){return this.PointAt(...this.ClosestParameter(t))}DistanceTo(t){const e=t.Subtract(this.Origin),r=t.DistanceTo(this.ClosestPoint(t));return e.DotProduct(this.ZAxis)>0?r:-r}Clone(){return new s(this.Origin,this.XAxis,this.YAxis)}Flip(){return new s(this.Origin,this.YAxis,this.XAxis)}IsPointCoplanar(t){return this.ClosestPoint(t).Equals(t)}IsLineCoplanar(t){return this.ClosestPoint(t.From).Equals(t.From)&&this.ClosestPoint(t.To).Equals(t.To)}static CreateFromNormal(t,e){const r=e.Unitize(),n=e.GetPerpendicularVector(),i=r.CrossProduct(n).Unitize();return new s(t,n,i)}static CreateFromFrame(t,e,r){return new s(t,e,r)}Transform(t){const e=this.Origin.Transform(t),r=this.XAxis.Transform(t,!0),n=this.YAxis.Transform(t,!0);return new s(e,r,n)}}e.Plane=s},950:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Transform=void 0;const n=r(653),i=r(226);class s{constructor(t){this.m=t}get Determinant(){const[t,e,r,n,i,s,o,a,l,u,c,h,d,Z,P,m]=this.m;return n*(+d*u*o-l*Z*o-d*s*c+i*Z*c+l*s*P-i*u*P)+a*(+t*u*P-t*Z*c+d*e*c-l*e*P+l*Z*r-d*u*r)+h*(+t*Z*o-t*s*P-d*e*o+i*e*P+d*s*r-i*Z*r)+m*(-l*s*r-t*u*o+t*s*c+l*e*o-i*e*c+i*u*r)}get M(){return this.ToArray()}static get Identity(){return new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}get IsIdentity(){return this.Equals(s.Identity)}static get ZeroTransformation(){return new s([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1])}get IsZeroTransformation(){return this.Equals(s.ZeroTransformation)}Equals(t){const e=this.M,r=t.M;for(let t=0;t<16;t++)if(!n.Open3d.equals(e[t],r[t]))return!1;return!0}Clone(){return new s(this.M)}ToArray(){return[...this.m]}static MultiplyMatrix(t,e){const r=t.m,n=e.m,[i,o,a,l,u,c,h,d,Z,P,m,X,Y,p,f,g]=r,[A,O,w,T,M,x,b,I,v,V,y,C,E,D,q,L]=n;return new s([i*A+o*M+a*v+l*E,i*O+o*x+a*V+l*D,i*w+o*b+a*y+l*q,i*T+o*I+a*C+l*L,u*A+c*M+h*v+d*E,u*O+c*x+h*V+d*D,u*w+c*b+h*y+d*q,u*T+c*I+h*C+d*L,Z*A+P*M+m*v+X*E,Z*O+P*x+m*V+X*D,Z*w+P*b+m*y+X*q,Z*T+P*I+m*C+X*L,Y*A+p*M+f*v+g*E,Y*O+p*x+f*V+g*D,Y*w+p*b+f*y+g*q,Y*T+p*I+f*C+g*L])}MultiplyMatrix(t){return s.MultiplyMatrix(this,t)}static MultiplyScalar(t,e){const r=t.M;for(let t=0;t<16;t++)r[t]*=e;return new s(r)}MultiplyScalar(t){return s.MultiplyScalar(this,t)}static Rotation(t,e=i.Vector3d.ZAxis,r=i.Vector3d.Zero){const n=s.Translation(r.Reverse()),o=s.RotateAtOrigin(t,e),a=s.Translation(r);return s.CombineTransforms([n,o,a])}static RotateAtOrigin(t,e){const r=Math.cos(t),n=Math.sin(t),i=1-r;if(e.IsZero)throw new Error("Rotation axis should not be zero vector.");const o=(e=e.Unitize()).X,a=e.Y,l=e.Z,u=i*o,c=i*a;return new s([u*o+r,u*a-n*l,u*l+n*a,0,u*a+n*l,c*a+r,c*l-n*o,0,u*l-n*a,c*l+n*o,i*l*l+r,0,0,0,0,1])}static RotationX(t){return s.Rotation(t,i.Vector3d.XAxis)}static RotationY(t){return s.Rotation(t,i.Vector3d.YAxis)}static RotationZ(t){return s.Rotation(t,i.Vector3d.ZAxis)}static RotationZYX(t,e,r){const n=s.RotationZ(t),i=s.RotationY(e),o=s.RotationX(r);return s.CombineTransforms([o,i,n])}static Translation(t){return new s([1,0,0,t.X,0,1,0,t.Y,0,0,1,t.Z,0,0,0,1])}static Scale(t,e){const r=s.Translation(t.Reverse()),n=s.ScaleAtOrigin(e,e,e),i=s.Translation(t);return s.CombineTransforms([r,n,i])}static CombineTransforms(t){const e=[...t];e.reverse();let r=s.Identity;for(let t=0;t<e.length;t++)r=r.MultiplyMatrix(e[t]);return r}static ScaleAtOrigin(t,e,r){return new s([t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1])}static PlanarProjection(t){let e=t.XAxis,r=t.YAxis,n=t.Origin;const i=e.X*e.X+r.X*r.X,o=e.X*e.Y+r.X*r.Y,a=e.X*e.Z+r.X*r.Z,l=e.Y*e.X+r.Y*r.X,u=e.Y*e.Y+r.Y*r.Y,c=e.Y*e.Z+r.Y*r.Z,h=e.Z*e.X+r.Z*r.X,d=e.Z*e.Y+r.Z*r.Y,Z=e.Z*e.Z+r.Z*r.Z,P=n.X-i*n.X+o*n.Y+a*n.Z,m=n.Y-l*n.X+u*n.Y+c*n.Z,X=n.Z-h*n.X+d*n.Y+Z*n.Z;return new s([i,o,a,P,l,u,c,m,h,d,Z,X,0,0,0,1])}static Mirror(t){const e=t.Equation,r=t.Normal,n=r.Multiply(-2*e[3]),i=1-2*r.X*r.X,o=-2*r.X*r.Y,a=-2*r.X*r.Z,l=n.X,u=-2*r.Y*r.X,c=1-2*r.Y*r.Y,h=-2*r.Y*r.Z,d=n.Y,Z=-2*r.Z*r.X,P=-2*r.Z*r.Y,m=1-2*r.Z*r.Z,X=n.Z;return new s([i,o,a,l,u,c,h,d,Z,P,m,X,0,0,0,1])}static VectorToVector(t,e){const r=e.CrossProduct(t);let n=i.Vector3d.VectorAngle(t,e);return s.RotateAtOrigin(-n,r)}static PlaneToPlane(t,e){const r=s.Translation(i.Vector3d.Zero.Subtract(t.Origin)),n=s.VectorToVector(t.XAxis,e.XAxis),o=t.YAxis.Transform(n),a=s.VectorToVector(o,e.YAxis),l=s.Translation(e.Origin);return s.CombineTransforms([r,n,a,l])}Transpose(){const t=this.M;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,new s(t)}TryGetInverse(){const t=this.M,[e,r,n,i,o,a,l,u,c,h,d,Z,P,m,X,Y]=this.m,p=h*X*u-m*d*u+m*l*Z-a*X*Z-h*l*Y+a*d*Y,f=P*d*u-c*X*u-P*l*Z+o*X*Z+c*l*Y-o*d*Y,g=c*m*u-P*h*u+P*a*Z-o*m*Z-c*a*Y+o*h*Y,A=P*h*l-c*m*l-P*a*d+o*m*d+c*a*X-o*h*X,O=e*p+r*f+n*g+i*A;if(0===O)return null;const w=1/O;return t[0]=p*w,t[1]=(m*d*i-h*X*i-m*n*Z+r*X*Z+h*n*Y-r*d*Y)*w,t[2]=(a*X*i-m*l*i+m*n*u-r*X*u-a*n*Y+r*l*Y)*w,t[3]=(h*l*i-a*d*i-h*n*u+r*d*u+a*n*Z-r*l*Z)*w,t[4]=f*w,t[5]=(c*X*i-P*d*i+P*n*Z-e*X*Z-c*n*Y+e*d*Y)*w,t[6]=(P*l*i-o*X*i-P*n*u+e*X*u+o*n*Y-e*l*Y)*w,t[7]=(o*d*i-c*l*i+c*n*u-e*d*u-o*n*Z+e*l*Z)*w,t[8]=g*w,t[9]=(P*h*i-c*m*i-P*r*Z+e*m*Z+c*r*Y-e*h*Y)*w,t[10]=(o*m*i-P*a*i+P*r*u-e*m*u-o*r*Y+e*a*Y)*w,t[11]=(c*a*i-o*h*i-c*r*u+e*h*u+o*r*Z-e*a*Z)*w,t[12]=A*w,t[13]=(c*m*n-P*h*n+P*r*d-e*m*d-c*r*X+e*h*X)*w,t[14]=(P*a*n-o*m*n-P*r*l+e*m*l+o*r*X-e*a*X)*w,t[15]=(o*h*n-c*a*n+c*r*l-e*h*l-o*r*d+e*a*d)*w,new s(t)}toString(){const[t,e,r,n,i,s,o,a,l,u,c,h,d,Z,P,m]=this.m;return`R0=(${t}, ${i}, ${l}, ${d}), R1=(${e}, ${s}, ${u}, ${Z}), R2=(${r}, ${o}, ${c}, ${P}), R3=(${n}, ${a}, ${h}, ${m})`}}e.Transform=s},226:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Vector3d=void 0;const n=r(653),i=r(950);class s{constructor(t,e,r){this.X=t,this.Y=e,this.Z=r}get IsUnitVector(){return n.Open3d.equals(this.Length,1)}get IsZero(){return n.Open3d.equals(this.X,0)&&n.Open3d.equals(this.Y,0)&&n.Open3d.equals(this.Z,0)}get Length(){return Math.hypot(this.X,this.Y,this.Z)}static Add(t,e){return new s(t.X+e.X,t.Y+e.Y,t.Z+e.Z)}Add(t){return s.Add(this,t)}static Subtract(t,e){return new s(t.X-e.X,t.Y-e.Y,t.Z-e.Z)}Subtract(t){return s.Subtract(this,t)}static Multiply(t,e){return new s(t.X*e,t.Y*e,t.Z*e)}Multiply(t){return s.Multiply(this,t)}static Divide(t,e){if(0===e)throw new Error("Division by zero");const r=1/e;return new s(t.X*r,t.Y*r,t.Z*r)}Divide(t){return s.Divide(this,t)}static Interpolate(t,e,r){return new s(t.X+(e.X-t.X)*r,t.Y+(e.Y-t.Y)*r,t.Z+(e.Z-t.Z)*r)}static DotProduct(t,e){return t.X*e.X+t.Y*e.Y+t.Z*e.Z}DotProduct(t){return s.DotProduct(this,t)}static CrossProduct(t,e){return new s(t.Y*e.Z-e.Y*t.Z,t.Z*e.X-e.Z*t.X,t.X*e.Y-e.X*t.Y)}CrossProduct(t){return s.CrossProduct(this,t)}static Distance(t,e){return e.Subtract(t).Length}DistanceTo(t){return s.Distance(this,t)}static Equals(t,e){return n.Open3d.equals(t.X,e.X)&&n.Open3d.equals(t.Y,e.Y)&&n.Open3d.equals(t.Z,e.Z)}Equals(t){return s.Equals(this,t)}static VectorAngle(t,e){if(t.IsZero||e.IsZero)throw new Error("Cannot compute angle of zero-length vector.");let r=s.DotProduct(t,e)/(t.Length*e.Length);return r=n.Open3d.clamp(r,-1,1),Math.acos(r)}VectorAngle(t){return s.VectorAngle(this,t)}static Reverse(t){return new s(-t.X,-t.Y,-t.Z)}Reverse(){return s.Reverse(this)}static Unitize(t){var e=t.Length;if(0===e)throw new Error("Cannot unitize a zero-length vector.");return new s(t.X/e,t.Y/e,t.Z/e)}Unitize(){return s.Unitize(this)}static IsParallel(t,e){if(t.IsZero||e.IsZero)return n.Open3d.ParallelIndicator.Parallel;const r=s.VectorAngle(t,e);return n.Open3d.angleEquals(r,0)?n.Open3d.ParallelIndicator.Parallel:n.Open3d.angleEquals(r,Math.PI)?n.Open3d.ParallelIndicator.AntiParallel:n.Open3d.ParallelIndicator.NotParallel}IsParallelTo(t){return s.IsParallel(this,t)}static IsPerpendicular(t,e){if(t.IsZero||e.IsZero)return!0;const r=s.VectorAngle(t,e);return!!n.Open3d.angleEquals(r,Math.PI/2)||!!n.Open3d.angleEquals(r,-Math.PI/2)}IsPerpendicularTo(t){return s.IsPerpendicular(this,t)}VectorRotate(t,e){const r=i.Transform.RotateAtOrigin(t,e);return this.Transform(r)}GetPerpendicularVector(){let t,e,r,n,i;r=2,Math.abs(this.Y)>Math.abs(this.X)?Math.abs(this.Z)>Math.abs(this.Y)?(t=2,e=1,r=0,n=this.Z,i=-this.Y):Math.abs(this.Z)>=Math.abs(this.X)?(t=1,e=2,r=0,n=this.Y,i=-this.Z):(t=1,e=0,r=2,n=this.Y,i=-this.X):Math.abs(this.Z)>Math.abs(this.X)?(t=2,e=0,r=1,n=this.Z,i=-this.X):Math.abs(this.Z)>Math.abs(this.Y)?(t=0,e=2,r=1,n=this.X,i=-this.Z):(t=0,e=1,r=2,n=this.X,i=-this.Y);let o=[0,0,0];return o[t]=i,o[e]=n,o[r]=0,new s(o[0],o[1],o[2]).Unitize()}Transform(t,e=!1){let r,n,i;const o=t.M;return e&&(o[3]=0,o[7]=0,o[11]=0),r=o[0]*this.X+o[1]*this.Y+o[2]*this.Z+o[3],n=o[4]*this.X+o[5]*this.Y+o[6]*this.Z+o[7],i=o[8]*this.X+o[9]*this.Y+o[10]*this.Z+o[11],new s(r,n,i)}toString(){return`[${this.X}, ${this.Y}, ${this.Z}]`}}e.Vector3d=s,s.XAxis=new s(1,0,0),s.YAxis=new s(0,1,0),s.ZAxis=new s(0,0,1),s.Zero=new s(0,0,0)}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,r),s.exports}var n={};return(()=>{var t=n;Object.defineProperty(t,"__esModule",{value:!0}),t.Open3d=t.Intersection=t.Transform=t.Plane=t.Line=t.Vector3d=void 0;var e=r(226);Object.defineProperty(t,"Vector3d",{enumerable:!0,get:function(){return e.Vector3d}});var i=r(582);Object.defineProperty(t,"Line",{enumerable:!0,get:function(){return i.Line}});var s=r(614);Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return s.Plane}});var o=r(950);Object.defineProperty(t,"Transform",{enumerable:!0,get:function(){return o.Transform}});var a=r(465);Object.defineProperty(t,"Intersection",{enumerable:!0,get:function(){return a.Intersection}});var l=r(653);Object.defineProperty(t,"Open3d",{enumerable:!0,get:function(){return l.Open3d}})})(),n})()}));